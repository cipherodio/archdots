#!/usr/bin/env bash
# Author: cipherodio
# Description: Take screenshots using maim + rofi

set -euo pipefail

OUTDIR="$HOME/hub/screenshot"
mkdir -p "$OUTDIR"

output="$OUTDIR/$(date '+%G-%d-%b-%I:%M%p').png"

choice="$(
    printf '%s\n' \
        "Selected area" \
        "Current window" \
        "Fullscreen" |
        rofi -dmenu -i -p "Screenshot"
)" || exit 0

case "$choice" in
"Selected area")
    maim -u -s "$output" &&
        notify-send "ðŸ“¸ Screenshot taken" "$output"
    ;;
"Current window")
    maim -B -q -d 0.2 -i "$(xdotool getactivewindow)" "$output" &&
        notify-send "ðŸ“¸ Screenshot taken" "$output"
    ;;
"Fullscreen")
    maim -q -d 0.2 "$output" &&
        notify-send "ðŸ“¸ Screenshot taken" "$output"
    ;;
esac
