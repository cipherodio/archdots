#!/usr/bin/env bash
# Author: cipherodio
# Description: Sync personal data, music, and wallpapers using rsync + rofi

set -euo pipefail

# TODO: Need to update this directories
# Personal data
sourcefiledir="$HOME/.local/src/rsync/"
targetfiledir="$HOME/.local/mnt/sda1/rsync/"

# Music
sourcemusicdir="/data/music/"
targetmusicdir="$HOME/.local/mnt/sda1/music/"

# Wallpapers
sourcewalldir="/data/wallpapers/"
targetwalldir="$HOME/.local/mnt/sda1/walls/"

# Actions
dpr() {
    rsync -anPv "$sourcefiledir" "$targetfiledir"
}

pr() {
    rsync -aPv "$sourcefiledir" "$targetfiledir"
}

dmusic() {
    rsync -anPv "$sourcemusicdir" "$targetmusicdir"
}

music() {
    rsync -aPv "$sourcemusicdir" "$targetmusicdir"
}

dwall() {
    rsync -anPv "$sourcewalldir" "$targetwalldir"
}

wall() {
    rsync -aPv "$sourcewalldir" "$targetwalldir"
}

# Rofi menu
choice="$(
    printf "%s\n" \
        "ğŸ“ Dry run: personal data" \
        "ğŸ“ Sync: personal data" \
        "ğŸµ Dry run: music" \
        "ğŸµ Sync: music" \
        "ğŸ–¼ï¸  Dry run: wallpapers" \
        "ğŸ–¼ï¸  Sync: wallpapers" |
        rofi -dmenu -i -p "syncdrive"
)"

[ -z "$choice" ] && exit 0

case "$choice" in
"ğŸ“ Dry run: personal data") dpr ;;
"ğŸ“ Sync: personal data") pr ;;
"ğŸµ Dry run: music") dmusic ;;
"ğŸµ Sync: music") music ;;
"ğŸ–¼ï¸  Dry run: wallpapers") dwall ;;
"ğŸ–¼ï¸  Sync: wallpapers") wall ;;
esac
