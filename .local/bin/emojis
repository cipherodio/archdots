#!/usr/bin/env bash
# Author: cipherodio
# Description: Emoji selection via rofi

set -euo pipefail

EMOJI_FILE="$HOME/.local/share/misc/emoji"

chosen=$(
    cut -d ';' -f1 "$EMOJI_FILE" |
        rofi -dmenu -i -l 10 -p emoji |
        sed 's/ .*//'
)

[[ -n ${chosen-} ]] || exit 0

# If called with an argument, type the emoji; otherwise copy to clipboard
if [[ -n ${1-} ]]; then
    xdotool type "$chosen"
else
    printf '%s' "$chosen" | xclip -selection clipboard
    notify-send "Emoji" "'$chosen' copied to clipboard." &
fi
